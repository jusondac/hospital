<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <section class="mb-10">
    <h2 class="text-3xl font-bold text-white mb-2">Patient Information</h2>
    <p class="text-sm text-gray-400 mb-6">Personal details and room assignment</p>
    <dl class="divide-y divide-gray-700">
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">Full name</dt>
        <dd class="text-sm text-white col-span-2"><%= @patient.name %></dd>
      </div>
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">Gender</dt>
        <dd class="text-sm text-white col-span-2"><%= @patient.gender %></dd>
      </div>
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">Age</dt>
        <dd class="text-sm text-white col-span-2"><%= @patient.age %></dd>
      </div>
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">Condition</dt>
        <dd class="text-sm text-white col-span-2"><%= @patient.condition %></dd>
      </div>
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">diagnose</dt>
        <dd class="text-sm text-white col-span-2"><%= @patient.diagnosis %></dd>
      </div>
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">Status</dt>
        <dd class="text-sm col-span-2">
          <% if @patient.recovered? %>
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-900 text-green-300">
              <svg class="-ml-0.5 mr-1.5 h-2 w-2" fill="currentColor" viewBox="0 0 8 8">
                <circle cx="4" cy="4" r="3" />
              </svg>
              Recovered & Discharged
            </span>
          <% elsif @patient.assigned_to_room? %>
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-900 text-blue-300">
              <svg class="-ml-0.5 mr-1.5 h-2 w-2" fill="currentColor" viewBox="0 0 8 8">
                <circle cx="4" cy="4" r="3" />
              </svg>
              Currently Admitted
            </span>
          <% else %>
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-900 text-yellow-300">
              <svg class="-ml-0.5 mr-1.5 h-2 w-2" fill="currentColor" viewBox="0 0 8 8">
                <circle cx="4" cy="4" r="3" />
              </svg>
              Awaiting Room Assignment
            </span>
          <% end %>
        </dd>
      </div>
      <div class="py-4 grid grid-cols-3 gap-4">
        <dt class="text-sm font-medium text-gray-400 col-span-1">Room Assignment</dt>
        <dd class="text-sm text-white col-span-2">
          <% if @patient.room %>
            <%= link_to "Room #{@patient.room.room_number}", room_path(@patient.room), class: "text-blue-400 hover:underline" %>
            <span class="ml-2 text-gray-500">(<%= @patient.room.room_type %>)</span>
          <% else %>
            <span class="text-yellow-400">Not assigned to any room</span>
          <% end %>
        </dd>
      </div>
    </dl>
  </section>
  <% if @patient.room %>
    <section class="mb-10">
      <h2 class="text-3xl font-bold text-white mb-2">Care Team</h2>
      <p class="text-sm text-gray-400 mb-6">Medical staff responsible for this patient</p>
      <dl class="divide-y divide-gray-700">
        <div class="py-4 grid grid-cols-3 gap-4">
          <dt class="text-sm font-medium text-gray-400 col-span-1">Doctor</dt>
          <dd class="text-sm text-white col-span-2">
            <% if @patient.room.doctor %>
              <%= link_to @patient.room.doctor.name, doctor_path(@patient.room.doctor), class: "text-blue-400 hover:underline" %>
              <span class="ml-2 text-gray-500">(<%= @patient.room.doctor.specialization %>)</span>
            <% else %>
              <span class="text-gray-500">No doctor assigned</span>
            <% end %>
          </dd>
        </div>
        <div class="py-4 grid grid-cols-3 gap-4">
          <dt class="text-sm font-medium text-gray-400 col-span-1">Nurse</dt>
          <dd class="text-sm text-white col-span-2">
            <% if @patient.room.nurse %>
              <%= link_to @patient.room.nurse.name, nurse_path(@patient.room.nurse), class: "text-blue-400 hover:underline" %>
              <span class="ml-2 text-gray-500">(<%= @patient.room.nurse.specialization %>)</span>
            <% else %>
              <span class="text-gray-500">No nurse assigned</span>
            <% end %>
          </dd>
        </div>
      </dl>
    </section>
  <% end %>
  <div class="mt-10 flex flex-col sm:flex-row justify-between items-center gap-4">
    <%= link_to "Back to Patients", patients_path, class: "text-blue-400 hover:underline text-sm" %>
    <div class="flex gap-2">
      <%= link_to "Edit", edit_patient_path(@patient), class: "px-4 py-2 rounded-lg text-sm font-medium bg-gray-800 text-blue-300 hover:bg-gray-700 hover:text-white transition" %>
      <% if @patient.assigned_to_room? %>
        <%= button_to "Discharge Patient", discharge_patient_path(@patient), method: :patch, data: { confirm: "Are you sure you want to discharge #{@patient.name}? This will make their room available for other patients." }, class: "px-4 py-2 rounded-lg text-sm font-medium bg-green-600 text-white hover:bg-green-700 transition" %>
      <% end %>
      <%= button_to "Delete", patient_path(@patient), method: :delete, data: { confirm: "Are you sure?" }, class: "px-4 py-2 rounded-lg text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition" %>
    </div>
  </div>
</div>
