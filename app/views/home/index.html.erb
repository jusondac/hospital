<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10" data-controller="chart">
  <!-- Hospital Overview Stats -->
  <div class="mb-8 grid grid-cols-1 md:grid-cols-4 gap-6">
    <div class="bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 overflow-hidden shadow-sm rounded-xl p-6 text-white">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-blue-100 text-sm font-medium">Total Patients</p>
          <p class="text-3xl font-extrabold" data-chart-target="totalPatients">--</p>
        </div>
        <div class="p-3 bg-white bg-opacity-20 rounded-full">
          <svg class="w-6 h-6 dark:text-gray-900" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
          </svg>
        </div>
      </div>
    </div>
    <div class="bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 overflow-hidden shadow-sm rounded-xl p-6 text-white">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-green-100 text-sm font-medium">Available Rooms</p>
          <p class="text-3xl font-extrabold" data-chart-target="availableRooms">--</p>
        </div>
        <div class="p-3 bg-white bg-opacity-20 rounded-full">
          <svg class="w-6 h-6 dark:text-gray-900" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20 9V6c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v3c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zM6 6h12v3H6V6zm0 5h12v5H6v-5z"/>
            <rect x="8" y="7" width="8" height="1"/>
            <rect x="8" y="13" width="8" height="1"/>
          </svg>
        </div>
      </div>
    </div>
    <div class="bg-gradient-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 overflow-hidden shadow-sm rounded-xl p-6 text-white">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-purple-100 text-sm font-medium">Active Doctors</p>
          <p class="text-3xl font-extrabold" data-chart-target="activeDoctors">--</p>
        </div>
        <div class="p-3 bg-white bg-opacity-20 rounded-full">
          <svg class="w-6 h-6 text-gray-900" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19.43 8.56c-.38-1.37-1.67-2.32-3.09-2.26-1.19.05-2.26.83-2.78 1.97-.53-1.14-1.6-1.92-2.78-1.97-1.42-.06-2.71.89-3.09 2.26C6.7 10.5 7.28 12.5 8.5 14c.6.74 1.3 1.38 2.06 1.9.38.26.8.48 1.23.65.21.08.43.15.65.2.07.02.14.03.21.04.14.02.28.03.43.03s.29-.01.43-.03c.07-.01.14-.02.21-.04.22-.05.44-.12.65-.2.43-.17.85-.39 1.23-.65.76-.52 1.46-1.16 2.06-1.9 1.22-1.5 1.8-3.5.81-5.44zM12 15c-.83 0-1.5-.67-1.5-1.5S11.17 12 12 12s1.5.67 1.5 1.5S12.83 15 12 15z"/>
          </svg>
        </div>
      </div>
    </div>
    <div class="bg-gradient-to-br from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 overflow-hidden shadow-sm rounded-xl p-6 text-white">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-orange-100 text-sm font-medium">On-Duty Nurses</p>
          <p class="text-3xl font-extrabold" data-chart-target="onDutyNurses">--</p>
        </div>
        <div class="p-3 bg-white bg-opacity-20 rounded-full">
          <svg class="w-6 h-6 text-gray-900" fill="currentColor" viewBox="0 0 20 20">
            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
          </svg>
        </div>
      </div>
    </div>
  </div>
  <!-- Main Analytics Charts -->
  <div class="mb-12 grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Patient Admissions Line Chart -->
    <div class="lg:col-span-2 bg-white dark:bg-gray-800 overflow-hidden shadow-sm rounded-xl p-6">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Patient Admissions Trend</h2>
          <p class="text-gray-600 dark:text-gray-300 text-sm">Last 30 days admission pattern</p>
        </div>
        <div class="flex items-center space-x-2">
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
            </svg>
            +12.5%
          </span>
        </div>
      </div>
      <div data-chart-target="patientTrendChart" class="w-full h-[300px]"></div>
    </div>
    <!-- Doctor Specialties Donut -->
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm rounded-xl p-6">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Doctor Specialties</h2>
      <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">Distribution by department</p>
      <div data-chart-target="doctorChart" class="w-full h-[250px]"></div>
    </div>
  </div>
  <!-- Secondary Analytics Row -->
  <div class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Room Occupancy Mixed Chart -->
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm rounded-xl p-6">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Room Occupancy</h2>
          <p class="text-gray-600 dark:text-gray-300 text-sm">Daily occupancy vs capacity</p>
        </div>
        <div class="text-right">
          <p class="text-sm text-gray-500 dark:text-gray-400">Current</p>
          <p class="text-lg font-semibold text-gray-900 dark:text-white" data-chart-target="occupancyRate">--</p>
        </div>
      </div>
      <div data-chart-target="roomOccupancyChart" class="w-full h-[250px]"></div>
    </div>
    <!-- Patient Condition Distribution -->
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm rounded-xl p-6">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Patient Conditions</h2>
      <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">Current patient status distribution</p>
      <div data-chart-target="patientConditionChart" class="w-full h-[250px]"></div>
    </div>
  </div>
  <!-- Detailed Analytics Row -->
  <div class="mb-12 grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Staff Performance Chart -->
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm rounded-xl p-6">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Staff Workload Distribution</h2>
      <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">Patients per staff member by specialty</p>
      <div data-chart-target="staffWorkloadChart" class="w-full h-[300px]"></div>
    </div>
    <!-- Monthly Trends -->
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm rounded-xl p-6">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Monthly Trends</h2>
      <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">Admissions, discharges, and transfers</p>
      <div data-chart-target="monthlyTrendsChart" class="w-full h-[300px]"></div>
    </div>
  </div>
  <!-- Dark mode toggle button -->
  <div class="fixed bottom-5 right-5">
    <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
      <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
      </svg>
      <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path>
      </svg>
    </button>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var themeToggleBtn = document.getElementById('theme-toggle');
    var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    // Change the icons inside the button based on previous settings
    if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        themeToggleLightIcon.classList.remove('hidden');
    } else {
        themeToggleDarkIcon.classList.remove('hidden');
    }

    themeToggleBtn.addEventListener('click', function() {
        // Toggle icons inside button
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');

        // If set via local storage previously
        if (localStorage.getItem('color-theme')) {
            if (localStorage.getItem('color-theme') === 'light') {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            }
        // If NOT set via local storage previously
        } else {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            }
        }
    });
  });
</script>
